<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: templates/lib/gulp-raml-parser.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: templates/lib/gulp-raml-parser.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module gulpRamlParser */
'use strict';

var ramlParser = require('raml-parser'),
  gutil = require('gulp-util'),
  through2 = require('through2');

function reportError(message, context, err) {
  var msg = message || 'Error';
  if (context) {
    msg += ' at path: [' + context.path.join('/') + ']';
  }
  if (err) {
    msg += ' ' + err.toString();
  }
  return new gutil.PluginError('raml-parser', msg);
}

function ramlParserFunc(file, enc, callback) {
  var stream = this,
    fail = function (message, err) {
      return callback(reportError(message, null, err));
    };

  if (file.isStream()) {
    return fail('Streams are not supported: ' + file.inspect());
  } else if (file.isNull()) {
    return fail('Input file is null: ' + file.inspect());
  } else if (!file.isBuffer()) {
    return fail('Expected a buffer: ' + file.inspect());
  }

  ramlParser.load(file.contents.toString(enc))
    .then(function () {
      stream.push(new gutil.File({
        base: file.base,
        cwd: file.cwd,
        path: file.path,
        contents: new Buffer(file.contents.toString(enc))
      }));
      callback();
    }, function (err) {
      fail('Error parsing RAML', err);
    });
}

function ramlParserPlugin() {
  return through2.obj(ramlParserFunc);
}

/** Gulp plugin to validate that RAML Parser can parse the input RAML file */
module.exports = ramlParserPlugin;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-gulpDerefRamlSchema.html">gulpDerefRamlSchema</a></li><li><a href="module-gulpFixRamlOutput.html">gulpFixRamlOutput</a></li><li><a href="module-gulpJsonToRamlStruct.html">gulpJsonToRamlStruct</a></li><li><a href="module-gulpRaml2Html.html">gulpRaml2Html</a></li><li><a href="module-gulpRamlLint.html">gulpRamlLint</a></li><li><a href="module-gulpRamlParser.html">gulpRamlParser</a></li><li><a href="module-gulpValidateExamples.html">gulpValidateExamples</a></li><li><a href="module-utils.html">utils</a></li></ul><h3>Global</h3><ul><li><a href="global.html#scanForRamlFile">scanForRamlFile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Wed Aug 26 2015 21:17:39 GMT-0500 (CDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
